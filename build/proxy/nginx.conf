events {}

http {
	gzip on;
	gzip_comp_level 2;
	gzip_min_length 1000;
	gzip_proxied expired no-cache no-store private auth;

	include mime.types;
	upstream server {
		server server:3000;
	}

	server {
		listen 80;
		autoindex on;
		root /www/data;

		location /api/ {
			proxy_pass http://server;
			proxy_redirect off;
			rewrite ^/api(.*)$ $1 break;
			proxy_hide_header Content-Type;
			add_header Content-Type "application/json";
		}

		location /auditorium/ {
			try_files $uri $uri/ /auditorium/index.html;
		}
	}
}

